import{r as d,u as p,c as m,a as s,w as i,v as l,b as u,d as _,e as g,f as h,o as f,g as w,R as x}from"./index-BquTWH03.js";import{a as v,S as b}from"./sweetalert2.all-DNnFSqmk.js";const y={id:"loginPage",class:"bg-yellow"},C={class:"container loginPage vhContainer"},I=s("div",{class:"side"},[s("a",{href:"#"},[s("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""})]),s("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"})],-1),k={class:"formControls",action:"index.html"},V=s("h2",{class:"formControls_txt"},"最實用的線上代辦事項服務",-1),B=s("label",{class:"formControls_label",for:"email_signIn"},"Email",-1),L=s("span",{class:"d-none"},"此欄位不可留空",-1),S=s("label",{class:"formControls_label",for:"pwd_signIn"},"密碼",-1),T="https://todolist-api.hexschool.io",P={__name:"SignInView",setup(D){const o=d({}),r=p(),n=({type:e,text:t})=>{b.fire({title:"訊息",text:t,icon:e,confirmButtonText:"關閉"})},c=async()=>{try{const e=await v.post(`${T}/users/sign_in`,{email:o.value.email,password:o.value.password});n({type:"success",text:"登入成功"});const t=e.data.token;document.cookie=`todoListToken=${t}; expires=${new Date(e.data.exp*1e3)}; path=/`,r.push("/todoList")}catch(e){n({type:"error",text:Array.isArray(e.response.data.message)?e.response.data.message[0]:e.response.data.message})}};return(e,t)=>(f(),m("div",y,[s("div",C,[I,s("div",null,[s("div",null,[s("form",k,[V,B,i(s("input",{class:"formControls_input",type:"text",id:"email_signIn",name:"email_signIn",placeholder:"請輸入 email",required:"","onUpdate:modelValue":t[0]||(t[0]=a=>o.value.email=a)},null,512),[[l,o.value.email]]),L,S,i(s("input",{class:"formControls_input",type:"password",name:"pwd_signIn",id:"pwd_signIn",placeholder:"請輸入密碼",required:"","onUpdate:modelValue":t[1]||(t[1]=a=>o.value.password=a)},null,512),[[l,o.value.password]]),s("input",{class:"formControls_btnSubmit",type:"button",value:"登入",onClick:u(c,["prevent"])}),_(h(x),{to:"/signUp",class:"formControls_btnLink"},{default:g(()=>[w("註冊帳號")]),_:1})])])])])]))}};export{P as default};
